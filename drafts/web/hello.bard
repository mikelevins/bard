(in-module hello (:use bard.http))

(define *hello-routes*
    {""    (make-route (404 _ _) "No such page")
     "foo" (make-route (200 req resp)
                       (with-input ((foo <Text> {:type <text-input> :text "foo"}))
                         (with-input ((click-me <Text> {:type <link> :value foo :text "Click Me"}))
                           (page (h1 (format "You said, '~A'" click-me))))))})

(serve
 (make <server> 
       :port 8080
       :routes *hello-routes*))